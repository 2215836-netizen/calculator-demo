<!DOCTYPE html>
<html class="dark" lang="ko">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>공학용 계산기 - Scientific Calculator</title>
    <meta name="description" content="모던한 디자인의 웹 기반 공학용 계산기. 기본 연산과 과학 함수를 지원합니다." />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />

    <!-- Material Symbols -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Tailwind Config -->
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#135bec",
                        "background-light": "#f6f6f8",
                        "background-dark": "#101622",
                        "surface-dark": "#1e2430",
                        "surface-light": "#ffffff",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>

    <style>
        /* Custom scrollbar hiding for clean UI */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        body {
            min-height: max(884px, 100dvh);
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-display h-screen flex flex-col overflow-hidden selection:bg-primary/30">
    <!-- Top Bar -->
    <div class="flex items-center justify-between px-6 pt-6 pb-2 shrink-0">
        <div class="flex items-center gap-2">
            <button id="rad-deg"
                class="text-xs font-mono text-blue-400 px-3 py-1 rounded-full border border-blue-500/30 hover:bg-blue-500/10 transition-colors">
                Rad
            </button>
        </div>
        <button id="historyBtn"
            class="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors text-slate-900 dark:text-white"
            aria-label="히스토리">
            <span class="material-symbols-outlined">history</span>
        </button>
    </div>

    <!-- Display Area -->
    <div class="flex-1 flex flex-col justify-end items-end px-6 pb-6 gap-2 w-full max-w-md mx-auto overflow-hidden">
        <!-- History / MetaText -->
        <div class="w-full text-right overflow-hidden">
            <p id="expression"
                class="text-slate-500 dark:text-[#9da6b9] text-lg sm:text-xl font-normal leading-normal truncate opacity-80">
                0
            </p>
        </div>
        <!-- Current Result / HeadlineText -->
        <div class="w-full text-right">
            <h1 id="display"
                class="text-slate-900 dark:text-white tracking-tight text-5xl sm:text-6xl font-bold leading-none break-all">
                0
            </h1>
        </div>
    </div>

    <!-- Keypad Container -->
    <div id="keypad"
        class="w-full max-w-md mx-auto bg-white/50 dark:bg-[#161b26] backdrop-blur-xl rounded-t-3xl shadow-[0_-4px_20px_rgba(0,0,0,0.05)] border-t border-white/20 dark:border-white/5 p-4 pb-8 h-auto shrink-0 z-10">
        <!-- Scientific Functions Grid -->
        <div class="grid grid-cols-5 gap-3 mb-4">
            <!-- Row 1 Sci -->
            <button data-action="sin"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">sin</button>
            <button data-action="cos"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">cos</button>
            <button data-action="tan"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">tan</button>
            <button data-action="pi"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">π</button>
            <button data-action="e"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">e</button>
            <!-- Row 2 Sci -->
            <button data-action="ln"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">ln</button>
            <button data-action="log"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">log</button>
            <button data-action="reciprocal"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">1/x</button>
            <button data-action="square"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">x²</button>
            <button data-action="sqrt"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">√</button>
            <!-- Row 3 Sci -->
            <button data-action="parenthesis" data-value="("
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">(</button>
            <button data-action="parenthesis" data-value=")"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">)</button>
            <button data-action="power" data-value="^"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">^</button>
            <button data-action="percent"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">%</button>
            <button data-action="backspace"
                class="h-10 flex items-center justify-center rounded-lg bg-slate-200 dark:bg-[#282e39] text-slate-700 dark:text-slate-200 text-sm font-medium hover:brightness-110 active:scale-95 transition-all">⌫</button>
        </div>

        <!-- Divider -->
        <div class="h-px bg-slate-200 dark:bg-white/5 w-full mb-4"></div>

        <!-- Main Numpad & Operations Grid -->
        <div class="grid grid-cols-4 gap-3">
            <!-- Row 1: Actions -->
            <button data-action="clear"
                class="h-16 flex items-center justify-center rounded-2xl bg-slate-300 dark:bg-[#3b4354] text-slate-900 dark:text-white text-xl font-bold hover:brightness-110 active:scale-95 transition-all">AC</button>
            <button data-action="backspace"
                class="h-16 flex items-center justify-center rounded-2xl bg-slate-300 dark:bg-[#3b4354] text-slate-900 dark:text-white text-xl font-bold hover:brightness-110 active:scale-95 transition-all">
                <span class="material-symbols-outlined">backspace</span>
            </button>
            <button data-action="percent"
                class="h-16 flex items-center justify-center rounded-2xl bg-slate-300 dark:bg-[#3b4354] text-slate-900 dark:text-white text-xl font-bold hover:brightness-110 active:scale-95 transition-all">%</button>
            <button data-action="divide"
                class="h-16 flex items-center justify-center rounded-2xl bg-blue-100 dark:bg-[#18202f] text-primary text-2xl font-bold hover:brightness-110 active:scale-95 transition-all">÷</button>

            <!-- Row 2: 7-9 -->
            <button data-action="number" data-value="7"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">7</button>
            <button data-action="number" data-value="8"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">8</button>
            <button data-action="number" data-value="9"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">9</button>
            <button data-action="multiply"
                class="h-16 flex items-center justify-center rounded-2xl bg-blue-100 dark:bg-[#18202f] text-primary text-2xl font-bold hover:brightness-110 active:scale-95 transition-all">×</button>

            <!-- Row 3: 4-6 -->
            <button data-action="number" data-value="4"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">4</button>
            <button data-action="number" data-value="5"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">5</button>
            <button data-action="number" data-value="6"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">6</button>
            <button data-action="subtract"
                class="h-16 flex items-center justify-center rounded-2xl bg-blue-100 dark:bg-[#18202f] text-primary text-2xl font-bold hover:brightness-110 active:scale-95 transition-all">-</button>

            <!-- Row 4: 1-3 -->
            <button data-action="number" data-value="1"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">1</button>
            <button data-action="number" data-value="2"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">2</button>
            <button data-action="number" data-value="3"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">3</button>
            <button data-action="add"
                class="h-16 flex items-center justify-center rounded-2xl bg-blue-100 dark:bg-[#18202f] text-primary text-2xl font-bold hover:brightness-110 active:scale-95 transition-all">+</button>

            <!-- Row 5: 0, ., = -->
            <button data-action="toggle-sign"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">
                <span class="material-symbols-outlined">calculate</span>
            </button>
            <button data-action="number" data-value="0"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">0</button>
            <button data-action="decimal"
                class="h-16 flex items-center justify-center rounded-2xl bg-white dark:bg-surface-dark text-slate-900 dark:text-white text-2xl font-semibold shadow-sm hover:brightness-110 active:scale-95 transition-all">.</button>
            <button data-action="equals"
                class="h-16 flex items-center justify-center rounded-2xl bg-primary text-white text-2xl font-bold shadow-lg shadow-primary/20 hover:brightness-110 active:scale-95 transition-all">=</button>
        </div>
    </div>

    <!-- History Panel -->
    <aside id="history-panel"
        class="fixed inset-y-0 right-0 w-80 bg-white dark:bg-surface-dark shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50 flex flex-col">
        <div class="flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 shrink-0">
            <h2 class="text-xl font-bold text-slate-900 dark:text-white">History</h2>
            <button id="closeHistoryBtn"
                class="p-2 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors text-slate-900 dark:text-white"
                aria-label="Close History">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
        <!-- History List -->
        <div id="history-list"
            class="flex-1 overflow-y-auto space-y-2 p-2 scrollbar-thin scrollbar-thumb-gray-600 scrollbar-track-transparent">
            <!-- History items will be populated here -->
        </div>
    </aside>

    <!-- Main Logic -->
    <script type="module" src="src/index.js"></script>
</body>

</html>